import UIKit

// ============================================================
// MARK: üß© –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫ —á–µ—Ä–µ–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª Error
// ============================================================

enum FileError: Error {
    case notFound          // —Ñ–∞–π–ª –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ
    case noPermission      // –Ω–µ–º–∞—î –¥–æ–∑–≤–æ–ª—É
}

// ============================================================
// MARK: ‚öôÔ∏è –§—É–Ω–∫—Ü—ñ—è, —â–æ –º–æ–∂–µ "–∫–∏–Ω—É—Ç–∏" –ø–æ–º–∏–ª–∫—É
// ============================================================
// Swift –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î: throw, throws, try –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫.
// –Ø–∫—â–æ —Ñ—É–Ω–∫—Ü—ñ—è –º–æ–∂–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –ø–æ–º–∏–ª–∫—É ‚Üí –ø–æ–∑–Ω–∞—á–∞—î—à —ó—ó 'throws'.
//
func readFile(named: String) throws -> String {
    if named == "secret.txt" { throw FileError.noPermission }
    if named == "missing.txt" { throw FileError.notFound }
    return "File content of \(named)"
}


// ============================================================
// MARK: üîπ 1. –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–∫–∏ —á–µ—Ä–µ–∑ try + do-catch
// ============================================================
// do     ‚Üí –≤–∏–∫–æ–Ω—É–π –∫–æ–¥
// catch  ‚Üí –æ–±—Ä–æ–±–∏ –ø–æ–º–∏–ª–∫—É, —è–∫—â–æ –≤–æ–Ω–∞ –≤–∏–Ω–∏–∫–ª–∞
//
do {
    let result = try readFile(named: "secret.txt")
    print(result)
} catch FileError.noPermission {
    print("‚ùå –ù–µ–º–∞—î –¥–æ–∑–≤–æ–ª—É –Ω–∞ —á–∏—Ç–∞–Ω–Ω—è —Ñ–∞–π–ª—É")
} catch FileError.notFound {
    print("‚ö†Ô∏è –§–∞–π–ª –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ")
} catch {
    print("‚ùóÔ∏è–ù–µ–≤—ñ–¥–æ–º–∞ –ø–æ–º–∏–ª–∫–∞:", error)
}


// ============================================================
// MARK: üîπ 2. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ do-catch –∑ –∫–æ—Ä–æ—Ç—à–∏–º –∑–∞–ø–∏—Å–æ–º
// ============================================================
// try ‚Üí –≤–∏–∫–ª–∏–∫–∞—î —Ñ—É–Ω–∫—Ü—ñ—é, —è–∫–∞ –º–æ–∂–µ –∫–∏–Ω—É—Ç–∏ –ø–æ–º–∏–ª–∫—É.
// –Ø–∫—â–æ –ø–æ–º–∏–ª–∫–∞ –≤–∏–Ω–∏–∫–∞—î ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å —É catch.
//
do {
    let result = try readFile(named: "secret.txt")
    print(result)
} catch {
    // –ù–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–Ω–æ–≤—É –∫–∏–¥–∞—Ç–∏ –ø–æ–º–∏–ª–∫—É —á–µ—Ä–µ–∑ 'throw'
    // –û–±—Ä–æ–±–ª—è—î–º–æ —ó—ó (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ª–æ–≥, alert, –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É)
    print("Error: \(error)")
}


// ============================================================
// MARK: üîπ 3. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è try?
// ============================================================
// –ü–µ—Ä–µ—Ç–≤–æ—Ä—é—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É optional: nil, —è–∫—â–æ —Å—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞.
//
let optionalResult = try? readFile(named: "missing.txt")
print(optionalResult ?? "no file") // nil ‚Üí –±–æ –∫–∏–Ω—É—Ç–æ FileError.notFound


// ============================================================
// MARK: üîπ 4. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è try!
// ============================================================
// –§–æ—Ä—Å–æ–≤–∞–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è ‚Äî –ø—Ä–æ–≥—Ä–∞–º–∞ –≤–ø–∞–¥–µ, —è–∫—â–æ –ø–æ–º–∏–ª–∫–∞ –≤–∏–Ω–∏–∫–Ω–µ!
// –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ª–∏—à–µ —è–∫—â–æ 100% –≤–ø–µ–≤–Ω–µ–Ω–∏–π —É –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ –ø–æ–º–∏–ª–∫–∏.
//
let forcedResult = try! readFile(named: "file.txt")
print(forcedResult) // –í–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ª–∏—à–µ —è–∫—â–æ –±–µ–∑ –ø–æ–º–∏–ª–∫–∏ ‚úÖ


// ============================================================
// MARK: üß† –ü—ñ–¥—Å—É–º–æ–∫:
// ============================================================
//
// ‚ñ™Ô∏è try   ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ do-catch
// ‚ñ™Ô∏è try?  ‚Äî –ø–æ–≤–µ—Ä—Ç–∞—î Optional (nil –ø—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ)
// ‚ñ™Ô∏è try!  ‚Äî —Ñ–æ—Ä—Å–æ–≤–∞–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è (–∫—Ä–∞—à –ø—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ)
//
// ‚ñ™Ô∏è throws ‚Üí —Ñ—É–Ω–∫—Ü—ñ—è –º–æ–∂–µ –∫–∏–Ω—É—Ç–∏ –ø–æ–º–∏–ª–∫—É
// ‚ñ™Ô∏è throw  ‚Üí –∫–∏–¥–∞—î –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É –ø–æ–º–∏–ª–∫—É
// ‚ñ™Ô∏è catch  ‚Üí –ª–æ–≤–∏—Ç—å —ñ –æ–±—Ä–æ–±–ª—è—î –ø–æ–º–∏–ª–∫—É
//

